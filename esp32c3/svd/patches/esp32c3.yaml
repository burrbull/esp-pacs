_svd: ../esp32c3.base.svd

_modify:
  SPI?:
    groupName: SPI

APB_SARADC:
  _include:
    - ../../../common_patches/int_strip.yaml
    - ../../../common_patches/adc.yaml

I2C0:
  _modify:
    INT_STATUS:
      name: INT_ST

RTC_CNTL:
  _include: ../../../common_patches/rtc_cntl_int_strip.yaml

"EFUSE,I2C0,I2S0,UART0,UHCI0,USB_DEVICE":
  _include: ../../../common_patches/int_strip.yaml

LEDC:
  _include: ../../../common_patches/ledc_collect.yaml
  INT_RAW:
    _strip_end: _INT_RAW
    _array:
      LSTIMER?_OVF:
        name: TIMER%s_OVF
      DUTY_CHNG_END_LSCH?:
        name: DUTY_CHNG_END_CH%s
        description: Interrupt raw bit for channel %s. Triggered when the gradual change of duty has finished.
      OVF_CNT_LSCH?:
        name: OVF_CNT_CH%s
        description: Interrupt raw bit for channel %s. Triggered when the OVF_CNT has reached the value specified by LEDC.CHx.CONF0.OVF_NUM.
  INT_ST:
    _strip_end: _INT_ST
    _array:
      LSTIMER?_OVF:
        name: TIMER%s_OVF
        description: This is the masked interrupt status bit for the TIMER%s_OVF interrupt when LEDC.INT_ENA.TIMERx_OVF is set to 1.
      DUTY_CHNG_END_LSCH?:
        name: DUTY_CHNG_END_CH%s
        description: This is the masked interrupt status bit for the DUTY_CHNG_END_CH%s interrupt when LEDC.INT_ENA.DUTY_CHNG_END_CHx is set to 1.
      OVF_CNT_LSCH?:
        name: OVF_CNT_CH%s
        description: This is the masked interrupt status bit for the LEDC.INT_RAW.OVF_CNT_CH%s interrupt when LEDC.INT_ENA.OVF_CNT_CHx is set to 1.
  INT_ENA:
    _strip_end: _INT_ENA
    _array:
      LSTIMER?_OVF:
        name: TIMER%s_OVF
        description: The interrupt enable bit for the TIMER%s_OVF interrupt.
      DUTY_CHNG_END_LSCH?:
        name: DUTY_CHNG_END_CH%s
        description: The interrupt enable bit for the DUTY_CHNG_END_CH%s interrupt.
      OVF_CNT_LSCH?:
        name: OVF_CNT_CH%s
        description: The interrupt enable bit for the OVF_CNT_CH%s interrupt.
  INT_CLR:
    _strip_end: _INT_CLR
    _array:
      LSTIMER?_OVF:
        name: TIMER%s_OVF
        description: Set this bit to clear the TIMER%s_OVF interrupt.
      DUTY_CHNG_END_LSCH?:
        name: DUTY_CHNG_END_CH%s
        description: Set this bit to clear the DUTY_CHNG_END_CH%s interrupt.
      OVF_CNT_LSCH?:
        name: OVF_CNT_CH%s
        description: Set this bit to clear the OVF_CNT_CH%s interrupt.
    _modify:
      "*":
        modifiedWriteValues: oneToClear


APB_CTRL:
  PERI_BACKUP_INT_RAW:
    _strip: PERI_BACKUP_
    _strip_end: _INT_RAW
  PERI_BACKUP_INT_ST:
    _strip: PERI_BACKUP_
    _strip_end: _INT_ST
  PERI_BACKUP_INT_ENA:
    _strip: PERI_BACKUP_
    _strip_end: _INT_ENA
  PERI_BACKUP_INT_CLR:
    _strip: PERI_BACKUP_
    _strip_end: _INT_CLR
    _modify:
      "*":
        modifiedWriteValues: oneToClear

EXTMEM:
  _include: ../../../common_patches/extmem_cache_int_strip.yaml

GPIO_SD:
  _modify:
    SIGMADELTA_CG:
      name: CLOCK_GATE
    SIGMADELTA_VERSION:
      name: VERSION
  SIGMADELTA%s:
    _strip: SD0_

UHCI0:
  _include:
    - ../../../common_patches/uhci_collect.yaml
    - ../../../common_patches/int_strip.yaml

TIMG0:
  _include: ../../../common_patches/tim_collect.yaml

SPI1:
  _include:
    - ../../../common_patches/int_strip.yaml
    - ../../../common_patches/spi_w.yaml

SPI2:
  _include:
    - ../../../common_patches/spi_dma_int_strip.yaml
    - ../../../common_patches/spi_w.yaml

SPI[12]:
  MISC:
    CS?_DIS:
      Disable: [1, disable CSx]
      Pin: [0, SPI_CSx signal is from/to CSx pin] 
    _array:
      CS?_DIS:
        description: SPI CS0 pin enable bit. Can be configured in CONF state

SPI[02]:
  DIN_MODE:
    _modify:
      DIN0_MODE:
        description: Configure the input mode for FSPID signal. Can be configured in CONF state
      DIN1_MODE:
        description: Configure the input mode for FSPIQ signal. Can be configured in CONF state
        derivedFrom: DIN0_MODE
      DIN2_MODE:
        description: Configure the input mode for FSPIWP signal. Can be configured in CONF state
        derivedFrom: DIN0_MODE
      DIN3_MODE:
        description: Configure the input mode for FSPIHF signal. Can be configured in CONF state
        derivedFrom: DIN0_MODE
    DIN0_MODE:
      _name: InMode
      NoDelay: [0, Input without delay]
      ApbRisingEdge: [1, Input at the rising edge of APB_CLK]
      ApbFallingEdge: [2, Input at the falling edge of APB_CLK]
      SpiEdge: [3, Input at the edge of SPI_CLK]
  DIN_NUM:
    _modify:
      DIN0_NUM:
        description: Configure the delays to input signal FSPID based on the setting of DIN%s_MODE. Can be configured in CONF state
      DIN1_NUM:
        description: Configure the delays to input signal FSPIQ based on the setting of DIN%s_MODE. Can be configured in CONF state
        derivedFrom: DIN0_NUM
      DIN2_NUM:
        description: Configure the delays to input signal FSPIWP based on the setting of DIN%s_MODE. Can be configured in CONF state
        derivedFrom: DIN0_NUM
      DIN3_NUM:
        description: Configure the delays to input signal FSPIHF based on the setting of DIN%s_MODE. Can be configured in CONF state
        derivedFrom: DIN0_NUM
    DIN0_NUM:
      _name: Delay
      Cycle1: [0, Delayed by 1 clock cycle]
      Cycles2: [1, Delayed by 2 clock cycles]
      Cycles3: [2, Delayed by 3 clock cycles]
      Cycles4: [3, Delayed by 4 clock cycles]
  DOUT_MODE:
    _modify:
      DOUT0_MODE:
        description: Configure the output mode for FSPID signal. Can be configured in CONF state
      DOUT1_MODE:
        description: Configure the output mode for FSPIQ signal. Can be configured in CONF state
        derivedFrom: DOUT0_MODE
      DOUT2_MODE:
        description: Configure the output mode for FSPIWP signal. Can be configured in CONF state
        derivedFrom: DOUT0_MODE
      DOUT3_MODE:
        description: Configure the output mode for FSPIHF signal. Can be configured in CONF state
        derivedFrom: DOUT0_MODE
    DOUT0_MODE:
      _name: OutMode
      NoDelay: [0, Output without delay]
      SpiEdge: [1, Output with a delay of a SPI module clock cycle at its falling edge]

DS:
  _add:
      IV_MEM%s:
        dim: 4
        dimIncrement: 0x4
        name: IV_MEM%s
        description: IV block data
        addressOffset: 0x630
        size: 0x20

SYSTIMER:
  _include: 
    - ../../../common_patches/int_strip.yaml
    - ../../../common_patches/systimer.yaml

DMA:
  _expand_array:
    INT_RAW_CH%s: {}
    INT_ENA_CH%s: {}
    INT_CLR_CH%s: {}
    IN_CONF0_CH%s: {}
    IN_LINK_CH%s: {}
    IN_DSCR_BF0_CH%s: {}
    IN_PRI_CH%s: {}
    IN_PERI_SEL_CH%s: {}
    OUT_CONF0_CH%s: {}
    OUT_CONF1_CH%s: {}
    OUT_LINK_CH%s: {}
    OUT_EOF_DES_ADDR_CH%s: {}
    OUT_PRI_CH%s: {}
    OUT_PERI_SEL_CH%s: {}

  _cluster:
    INT_CH%s:
      INT_RAW_CH?:
        name: RAW
      INT_ST_CH?:
        name: ST
      INT_ENA_CH?:
        name: ENA
      INT_CLR_CH?:
        name: CLR
        _modify:
          "*":
            modifiedWriteValues: oneToClear
    CH%s:
      IN_CONF0_CH?:
        name: IN_CONF0
      IN_CONF1_CH?:
        name: IN_CONF1
      INFIFO_STATUS_CH?:
        name: INFIFO_STATUS
      IN_POP_CH?:
        name: IN_POP
      IN_LINK_CH?:
        name: IN_LINK
      IN_STATE_CH?:
        name: IN_STATE
      IN_SUC_EOF_DES_ADDR_CH?:
        name: IN_SUC_EOF_DES_ADDR
      IN_ERR_EOF_DES_ADDR_CH?:
        name: IN_ERR_EOF_DES_ADDR
      IN_DSCR_CH?:
        name: IN_DSCR
      IN_DSCR_BF0_CH?:
        name: IN_DSCR_BF0
      IN_DSCR_BF1_CH?:
        name: IN_DSCR_BF1
      IN_PRI_CH?:
        name: IN_PRI
      IN_PERI_SEL_CH?:
        name: IN_PERI_SEL
      OUT_CONF0_CH?:
        name: OUT_CONF0
      OUT_CONF1_CH?:
        name: OUT_CONF1
      OUTFIFO_STATUS_CH?:
        name: OUTFIFO_STATUS
      OUT_PUSH_CH?:
        name: OUT_PUSH
      OUT_LINK_CH?:
        name: OUT_LINK
      OUT_STATE_CH?:
        name: OUT_STATE
      OUT_EOF_DES_ADDR_CH?:
        name: OUT_EOF_DES_ADDR
      OUT_EOF_BFR_DES_ADDR_CH?:
        name: OUT_EOF_BFR_DES_ADDR
      OUT_DSCR_CH?:
        name: OUT_DSCR
      OUT_DSCR_BF0_CH?:
        name: OUT_DSCR_BF0
      OUT_DSCR_BF1_CH?:
        name: OUT_DSCR_BF1
      OUT_PRI_CH?:
        name: OUT_PRI
      OUT_PERI_SEL_CH?:
        name: OUT_PERI_SEL
